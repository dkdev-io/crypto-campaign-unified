<!DOCTYPE html>
<html>
<head>
    <title>FEC API Test</title>
</head>
<body>
    <h1>FEC API Direct Test</h1>
    <input type="text" id="search" placeholder="Enter committee name" value="Biden">
    <button onclick="testAPI()">Test FEC API</button>
    <div id="results"></div>

    <script>
        async function testAPI() {
            const searchTerm = document.getElementById('search').value;
            const apiKey = 'F7QA9sKDcXZOjuqz2nk7DzZXLenyzf3GEYaZqpFD';
            const url = `https://api.open.fec.gov/v1/committees/?q=${searchTerm}&per_page=10&is_active=true&sort=name&api_key=${apiKey}`;
            
            document.getElementById('results').innerHTML = 'Loading...';
            
            try {
                console.log('Fetching:', url);
                const response = await fetch(url);
                const data = await response.json();
                
                console.log('Response:', data);
                
                let html = `<h3>Found ${data.pagination.count} committees</h3>`;
                if (data.results && data.results.length > 0) {
                    html += '<ul>';
                    data.results.forEach(c => {
                        html += `<li><strong>${c.name}</strong> (${c.committee_id}) - ${c.state}, ${c.committee_type}</li>`;
                    });
                    html += '</ul>';
                } else {
                    html += '<p>No results found</p>';
                }
                
                document.getElementById('results').innerHTML = html;
            } catch (error) {
                document.getElementById('results').innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
                console.error('Error:', error);
            }
        }
    </script>
</body>
</html>